---
title: "Tutorial: Setting Up a Pentesting Lab"
description: "Complete guide to create your own pentesting lab from scratch using VirtualBox and open source tools."
pubDate: 2025-01-25
category: "tutorial"
difficulty: "intermediate"
tags: ["tutorial", "lab", "virtualbox", "kali", "metasploitable"]
language: "en"
readTime: 15
---

## üéØ Tutorial Objective

You will learn to set up a complete and functional pentesting lab on your own machine using free software.

## üìã Prerequisites

### Hardware
- **RAM**: Minimum 8GB (16GB recommended)
- **CPU**: 4-core processor or more
- **Storage**: 100GB free disk space
- **Virtualization**: VT-x/AMD-V enabled in BIOS

### Software
- VirtualBox 7.0 or higher
- Stable internet connection
- Host OS: Windows/Linux/macOS

## üîß Step 1: Installing VirtualBox

### Download and Installation

```bash
# On Linux (Ubuntu/Debian)
sudo apt update
sudo apt install virtualbox virtualbox-ext-pack

# Verify installation
VBoxManage --version
```

For Windows/macOS, download from [virtualbox.org](https://www.virtualbox.org/).

### Network Configuration

Create a NAT network for the lab:

```bash
VBoxManage natnetwork add --netname LabNetwork --network "192.168.100.0/24" --enable
```

## üêâ Step 2: Configure Kali Linux

### Download Kali

1. Visit [kali.org/get-kali](https://www.kali.org/get-kali/)
2. Download the pre-built VirtualBox image
3. Import the .ova file into VirtualBox

### Initial Configuration

```bash
# Update system
sudo apt update && sudo apt upgrade -y

# Install additional tools
sudo apt install -y \
    terminator \
    tmux \
    git \
    curl \
    wget \
    python3-pip

# Configure Python
pip3 install --upgrade pip
pip3 install requests beautifulsoup4 pwntools
```

### Customization

```bash
# Create directory structure
mkdir -p ~/labs/{htb,thm,vulnhub,tools,notes}

# Install additional tools
git clone https://github.com/carlospolop/PEASS-ng.git ~/tools/peass
git clone https://github.com/rebootuser/LinEnum.git ~/tools/linenum
```

## üéØ Step 3: Vulnerable Machines

### Metasploitable 3

```bash
# Clone repository
git clone https://github.com/rapid7/metasploitable3.git
cd metasploitable3

# Build with Vagrant
vagrant up
```

### DVWA (Damn Vulnerable Web Application)

```bash
# Download Docker image
docker pull vulnerables/web-dvwa

# Run container
docker run -d -p 80:80 vulnerables/web-dvwa
```

### VulnHub Machines

Download from [vulnhub.com](https://www.vulnhub.com/):
- **Kioptrix Level 1**: Ideal for beginners
- **Mr. Robot**: Intermediate difficulty
- **Brainpan**: Practice buffer overflow

## üåê Step 4: Network Configuration

### Network Topology

```
Internet
    |
    v
[Host Machine]
    |
    +--- NAT Network (192.168.100.0/24)
          |
          +--- [Kali Linux] (192.168.100.10)
          |
          +--- [Metasploitable] (192.168.100.20)
          |
          +--- [DVWA] (192.168.100.30)
```

### Configure Static IPs

On each VM, edit `/etc/network/interfaces`:

```bash
# Kali Linux
auto eth0
iface eth0 inet static
    address 192.168.100.10
    netmask 255.255.255.0
    gateway 192.168.100.1
    dns-nameservers 8.8.8.8 8.8.4.4
```

## üõ†Ô∏è Step 5: Essential Tools

### Vulnerability Scanner

```bash
# Install Nessus (free version)
wget https://www.tenable.com/downloads/api/v1/public/pages/nessus/downloads/[VERSION]/Nessus-[VERSION]-debian6_amd64.deb
sudo dpkg -i Nessus-*.deb
sudo /bin/systemctl start nessusd.service
```

### Interception Proxy

```bash
# Burp Suite Community
sudo apt install burpsuite

# Configure certificate
# 1. Start Burp Suite
# 2. Go to Proxy > Options
# 3. Export CA certificate
# 4. Install in browser
```

### Exploitation Framework

```bash
# Metasploit Framework (already included in Kali)
msfconsole

# Update database
msfdb init
msfdb start
```

## üìù Step 6: Lab Validation

### Connectivity Test

```bash
# From Kali, ping the VMs
ping -c 4 192.168.100.20  # Metasploitable
ping -c 4 192.168.100.30  # DVWA

# Quick scan with nmap
nmap -sn 192.168.100.0/24
```

### First Scan

```bash
# Complete Metasploitable scan
nmap -sC -sV -p- -oN metasploitable_scan.txt 192.168.100.20

# Vulnerability scan
nmap --script vuln 192.168.100.20
```

## üéì Practical Exercises

### Exercise 1: Web Enumeration

```bash
# Enumerate DVWA
gobuster dir -u http://192.168.100.30 \
    -w /usr/share/wordlists/dirb/common.txt \
    -x php,html,txt

# Identify technologies
whatweb http://192.168.100.30
```

### Exercise 2: Basic Exploitation

```bash
# Search for exploits for found services
searchsploit vsftpd 2.3.4

# Use Metasploit
msfconsole
use exploit/unix/ftp/vsftpd_234_backdoor
set RHOSTS 192.168.100.20
exploit
```

## üîí Best Practices

1. **Snapshots**: Create snapshots before each important change
2. **Isolation**: Keep the lab on an isolated network
3. **Documentation**: Record all your findings
4. **Backups**: Back up configurations periodically

## üìö Additional Resources

- **Books**: "The Hacker Playbook" series
- **Courses**: Offensive Security (OSCP)
- **Communities**: Reddit r/netsec, HackTheBox Discord
- **Blogs**: 0xdf.gitlab.io, ippsec.rocks

## üéØ Next Steps

1. Practice with VulnHub machines
2. Register on HackTheBox/TryHackMe
3. Document your first writeups
4. Join security communities

Your lab is ready! Now it's time to practice and improve your pentesting skills.
